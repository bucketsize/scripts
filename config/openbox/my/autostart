#!/bin/sh

# opendesktop autostart
# TODO:
# 2. download and cycle through wallpapers
# 3. brightness control
# 4. complete shortcuts
# 9. fix compositing; compton is crashing in alpine

stopAll(){
	(sleep 1 && killall picom) &
	(sleep 1 && killall dunst) &
	(sleep 1 && killall tint2) &
	(sleep 2 && killall skhkd) &
	(sleep 2 && killall lxpolkit) &
	(sleep 2 && killall lxclipboard) &
	(sleep 3 && xautolock -exit) &
	(sleep 3 && killall light-locker) &
	(sleep 3 && killall conky)
}
startAll(){
	(sleep 1 && ~/scripts/xdg/x.wallpaper.sh) &
	(sleep 1 && picom) &
	(sleep 2 && dunst) &
	(sleep 3 && tint2) &
	(sleep 3 && sxhkd) &
	(sleep 4 && lxpolkit) &
	(sleep 4 && lxclipboard) &
	(sleep 5 && xautolock \
		-time 5 -locker "~/scripts/sys_ctl/ctl.lua cmd scr_lock" \
		-killtime 10 -killer "notify-send -u critical -t 10000 -- 'Killing system ...'" \
		-notify 30 -notifier "notify-send -u critical -t 10000 -- 'Locking system ETA 30s ...'") &
	(sleep 5 && ~/scripts/sys_ctl/ctl.lua cmd scr_lock_on_lid) &
	(sleep 5 && conky) &
}

case $i in
    stop)
        stopAll
        ;;
    *)
        stopAll
        startAll
        ;;
esac



